<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Admin • Testadores</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/static/style.css">
</head>
<body id="page-admin-users">
  
  <aside class="sidebar">
    <div class="brand-wrap">
      <img src="/static/logoge.png" alt="GE" class="brand-logo">
      <div class="brand">Test Manager SAP</div>
    </div>
    <nav>
      <a href="/admin">Hub</a>
      <a href="/admin/tests">Testes</a>
      <a class="active" href="/admin/users">Testadores</a>
      <a href="/admin/metrics">Métricas</a>
    </nav>
  </aside>

  <div class="main-content">
    
    <header class="top-header">
      <nav class="top-actions">
        <span>Administrador</span>
        <button id="btnLogout" class="btn danger">Sair</button>
      </nav>
    </header>

    <main class="container grid">
      <section class="card">
        <h2 class="section-title">Cadastro e Edição de Testador</h2>

        <form id="userForm">
          <input type="hidden" id="u_original_username" /> <h3 style="margin-top:20px;border-left:2px solid #1E3A8A;padding-left:8px;">Dados do Testador</h3>
          
          <div class="form-grid">
            <div>
              <label>Username (Email de Login)</label>
              <input type="email" id="u_username" placeholder="ex.: joaotester@empresa.com" required />
            </div>
            <div>
              <label>Nome Completo</label>
              <input type="text" id="u_name" placeholder="ex.: João da Silva" />
            </div>
            <div>
              <label>Email</label>
              <input type="email" id="u_email" placeholder="email@empresa.com" />
            </div>
            <div>
              <label>Credencial Empresa</label>
              <input type="text" id="u_credential" placeholder="ex.: FI_01" />
            </div>
            <div>
              <label>Departamento</label>
              <input type="text" id="u_department" placeholder="ex.: Financeiro (FI)" />
            </div>
            <div>
              <label>Data de Nascimento</label>
              <input type="date" id="u_birth_date" />
            </div>
          </div>
          
          <div class="actions" style="grid-column:1/-1;justify-content:flex-start">
            <button type="submit" id="btnSaveUser" class="btn primary">Salvar Novo Testador</button>
            <button type="button" id="btnUpdateUser" class="btn" disabled>Atualizar Selecionado</button>
            <button type="button" id="btnToggleUser" class="btn" disabled>Ativar/Desativar</button>
            <button type="button" id="btnDeleteUser" class="btn danger" disabled>Excluir</button>
          </div>

          <p class="hint">A senha padrão para novos testadores deve ser inserida diretamente no banco ou a ser definida pelo Administrador.</p>
        </form>

        <h2 class="section-title" style="margin-top:30px">Logs de Login (Usuário Selecionado)</h2>
        <div id="userStats" class="kpi">
            <span>Total de Logins:</span> <strong id="loginCount">0</strong>
        </div>
        <div id="userLogs" class="table-wrap"></div>
      </section>

      <section class="card">
        <h2 class="section-title">Lista de Testadores Cadastrados</h2>
        <div id="usersList" class="table-wrap"></div>
      </section>
    </main>

  </div>

  <script src="/static/script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", initAdminUsers);
  </script>
</body>
</html>